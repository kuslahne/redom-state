!function(){"use strict";function t(t,e){for(var n,o,i,a=0,s=0,r=t.length,u=0;u<=r;u++){var d=t[u];if(d===l||d===h||null==d){if(0===a)n=0===u?"div":null==d?t:t.substring(s,u);else{var c=t.substring(s,u);1===a?o=c:i?i+=" "+c:i=c}s=u+1,a=d===l?1:2}}var g=e?document.createElementNS(e,n):document.createElement(n);return o&&(g.id=o),i&&(g.className=i),g}function e(t){return document.createTextNode(t)}function n(t,e,n){var o=t.el||t,i=e.el||e;i.__redom_list&&(i=i.el),e===i&&i.__redom_view&&(e=i.__redom_view),e!==i&&(i.__redom_view=e),e.isMounted?e.remount&&e.remount():e.mount&&e.mount(),n?o.insertBefore(i,n.el||n):o.appendChild(i),e.isMounted?e.remounted&&e.remounted():(e.isMounted=!0,e.mounted&&e.mounted())}function o(t,e){var n=t.el||t,o=e.el||e;e===o&&o.__redom_view&&(e=o.__redom_view),e.unmount&&e.unmount(),n.removeChild(o),e.isMounted=!1,e.unmounted&&e.unmounted()}function i(o){var i,a=arguments;if("string"==typeof o)i=(c[o]||(c[o]=t(o))).cloneNode(!1);else{if(!o||!o.nodeType)throw new Error("At least one argument required");i=o.cloneNode(!1)}for(var s=!0,r=1;r<arguments.length;r++){var u=a[r];if(u)if("function"==typeof u)u(i);else if("string"==typeof u||"number"==typeof u)s?(s=!1,i.textContent=u):i.appendChild(e(u));else if(u.nodeType||u.el&&u.el.nodeType)s=!1,n(i,u);else if(u.length){s=!1;for(var d=0;d<u.length;d++)n(i,u[d])}else if("object"==typeof u)for(var l in u){var h=u[l];if("style"===l)if("string"==typeof h)i.setAttribute(l,h);else for(var g in h)i.style[g]=h[g];else l in i||"function"==typeof h?i[l]=h:i.setAttribute(l,h)}}return i}function a(t,e){for(var i=t.el||t,a=i.firstChild,s=0;s<e.length;s++){var r=e[s];if(r){var u=r.el||r;u!==a?n(t,r,a):a=a.nextSibling}}for(;a;){var d=a.nextSibling;o(t,a),a=d}}function s(t,e,n,o){return new r(t,e,n,o)}function r(t,e,n,o){this.__redom_list=!0,this.View=e,this.key=n,this.initData=o,this.views=[],this.el="string"==typeof t?i(t):t,n&&(this.lookup={})}function u(t,e){return new g(t,e)}function d(o,i){var a,s=arguments;if("string"==typeof o)a=(f[o]||(f[o]=t(o,p))).cloneNode(!1);else{if(!o||!o.nodeType)throw new Error("At least one argument required");a=o.cloneNode(!1)}for(var r=!0,u=1;u<arguments.length;u++){var d=s[u];if(d)if("function"==typeof d)d=d(a);else if("string"==typeof d||"number"==typeof d)r?(r=!1,a.textContent=d):a.appendChild(e(d));else if(d.nodeType||d.el&&d.el.nodeType)r=!1,n(a,d);else if("object"==typeof d)for(var l in d){var h=d[l];if("style"===l&&"string"!=typeof h)for(var c in h)a.style[c]=h[c];else"function"==typeof h?a[l]=h:a.setAttribute(l,h)}}return a}var l="#",h=".",c={};i.extend=function(e){var n=c[e]||(c[e]=t(e));return i.bind(this,n)},r.extend=function(t,e,n,o){return r.bind(r,t,e,n,o)},s.extend=r.extend,r.prototype.update=function(t){for(var e=this.View,n=this.key,o="function"==typeof n,i=this.initData,s=new Array(t.length),r=this.views,u=n&&{},d=n&&this.lookup,l=0;l<t.length;l++){var h=t[l],c=void 0;if(n){var g=o?n(h):h[n];c=s[l]=d[g]||new e(i,h,l,t),u[g]=c,c.__id=g}else c=s[l]=r[l]||new e(i,h,l,t);var p=c.el;p.__redom_list&&(p=p.el),p.__redom_view=c,c.update&&c.update(h,l,t)}a(this,s),n&&(this.lookup=u),this.views=s};var g=function(t,e){this.el="string"==typeof t?i(t):t,this.Views=e};g.prototype.update=function(t,e){if(t!==this.route){var n=this.Views,o=n[t];this.view=o&&new o,this.route=t,a(this.el,[this.view])}this.view&&this.view.update&&this.view.update(e)};var p="http://www.w3.org/2000/svg",f={};d.extend=function(e){var n=f[e]||(f[e]=t(e,p));return d.bind(this,n)};var v=function(t,e,n){var o=t.el||t;o.dispatchEvent(new CustomEvent("redom",{detail:{type:e,data:n},bubbles:!0}))},m=function(t,e){var n=t.el||t;n.addEventListener("redom",function(t){var n=t.detail,o=n.type,i=n.data,a=e[o];a&&a(i,t)})},b=function(){var t=this;this.el=i(".menu-item"),this.el.onclick=function(e){v(t,"section",t.data.id)}};b.prototype.update=function(t){var e=t.name,n=t._current;this.el.textContent=e,n?this.el.classList.add("current"):this.el.classList.remove("current"),this.data=t};var w=function(){this.el=i(".menu",this.sections=s(".menu-items",b,"id"))};w.prototype.update=function(t){var e=t.sections,n=t.section;this.sections.update(e.map(function(t){return Object.assign({},t,{_current:n===t.id})})),this.data=t};var y=function(){this.el=i(".home",i("h1","Home"),i("p","Welcome to RE:DOM state handling example."),i("a",{href:"#about"},"Check out about section for some more info."))},_=function(){var t=this;this.el=i(".about",i("h1","About RE:DOM state handling"),i("p","I like to do RE:DOM state handling so that I dispatch custom HTML event upstream and update RE:DOM components downstream."),i("p","Turn on the debug mode, navigate around and see what happens under the hood:"),this.toggleDebug=i("button"),i("br"),this.toggleLogo=i("button"),i("br"),i("br"),this.logo=i("img"),i("br"),i("br"),i("p",i("i","ps. try refresh the page and see what happens ;)"))),this.toggleDebug.onclick=function(e){v(t,"toggle-debug")},this.toggleLogo.onclick=function(e){v(t,"toggle-logo")}};_.prototype.update=function(t){var e=t.debug,n=t.logo;e?this.toggleDebug.textContent="Deactivate state debugging":this.toggleDebug.textContent="Activate state debugging",n?(this.toggleLogo.textContent="Hide logo",this.logo.src="https://redom.js.org/img/logo.svg"):(this.toggleLogo.textContent="Show logo",this.logo.src=""),this.data=t};var x=function(){this.el=i(".content"),this.router=u(this.el,{"":y,about:_})};x.prototype.update=function(t){var e=t.section;this.router.update(e,t)};var D=function(t){var e=this;this.el=i(".debug"),this.app=t,this.onDebug=function(t){var n=t.detail,o=n.data,i=n.type;o?e.log('{ "type": "'+i+'", data: "'+o+'" }'):e.log('{ "type": \''+i+'" }')},this.data={}};D.prototype.update=function(t){var e=t.debug;e?(this.el.style.display="",this.app.el.addEventListener("redom",this.onDebug)):(this.el.style.display="none",this.app.el.removeEventListener("redom",this.onDebug)),e!==!!this.data.debug&&(e?this.log('{ "type": "toggle-debug" }'):this.log('{ "type": "toggle-debug" }')),this.data=t},D.prototype.log=function(t){n(this.el,i("p","<- "+t)),n(this.el,i("p","-> "+JSON.stringify(this.app.data,null," "))),n(this.el,i("br")),this.el.scrollTop=this.el.scrollHeight};var C=function(t){this.el=i(".app",this.menu=new w,this.content=new x,this.debug=new D(this)),this.data=t};C.prototype.update=function(){this.menu.update(this.data),this.content.update(this.data),this.debug.update(this.data),window.localStorage&&window.localStorage.setItem("redom-state",JSON.stringify(this.data))},C.prototype.recoverData=function(){var t=window.localStorage&&window.localStorage.getItem("redom-state");t&&(this.data=JSON.parse(t),this.update())};var E=function(t,e){var n=function(){var e=location.hash.slice(1).split("/");v(t,"route",e)};m(t,e),window.addEventListener("hashchange",n),t.startRoute=n},L=function(t){return{route:function(e){var n=e[0];t.data=Object.assign({},t.data,{section:n}),t.update()},section:function(t){var e=window.location.hash.slice(1).split("/");e[0]=t,window.location.hash=e.join("/")},"toggle-debug":function(){var e=!t.data.debug;t.data=Object.assign({},t.data,{debug:e}),t.update()},"toggle-logo":function(){var e=!t.data.logo;t.data=Object.assign({},t.data,{logo:e}),t.update()}}},O={sections:[{id:"",name:"Home"},{id:"about",name:"About"}]},S=new C(O);n(document.body,S),E(S,L(S)),S.recoverData(),S.startRoute()}();
//# sourceMappingURL=main.map.js