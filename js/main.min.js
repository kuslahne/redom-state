!function(){"use strict";function t(t,e){for(var n,i,o,a=0,s=0,r=t.length,u=0;u<=r;u++){var d=t[u];if(d===l||d===h||null==d){if(0===a)n=0===u?"div":null==d?t:t.substring(s,u);else{var p=t.substring(s,u);1===a?i=p:o?o+=" "+p:o=p}s=u+1,a=d===l?1:2}}var c=e?document.createElementNS(e,n):document.createElement(n);return i&&(c.id=i),o&&(c.className=o),c}function e(t){return document.createTextNode(t)}function n(t,e,n){var i=t.el||t,o=e.el||e;o.__redom_list&&(o=o.el),e===o&&o.__redom_view&&(e=o.__redom_view),e!==o&&(o.__redom_view=e),e.isMounted?e.remount&&e.remount():e.mount&&e.mount(),n?i.insertBefore(o,n.el||n):i.appendChild(o),e.isMounted?e.remounted&&e.remounted():(e.isMounted=!0,e.mounted&&e.mounted())}function i(t,e){var n=t.el||t,i=e.el||e;e===i&&i.__redom_view&&(e=i.__redom_view),e.unmount&&e.unmount(),n.removeChild(i),e.isMounted=!1,e.unmounted&&e.unmounted()}function o(i){var o,a=arguments;if("string"==typeof i)o=(p[i]||(p[i]=t(i))).cloneNode(!1);else{if(!i||!i.nodeType)throw new Error("At least one argument required");o=i.cloneNode(!1)}for(var s=!0,r=1;r<arguments.length;r++){var u=a[r];if(u)if("function"==typeof u)u(o);else if("string"==typeof u||"number"==typeof u)s?(s=!1,o.textContent=u):o.appendChild(e(u));else if(u.nodeType||u.el&&u.el.nodeType)s=!1,n(o,u);else if(u.length){s=!1;for(var d=0;d<u.length;d++)n(o,u[d])}else if("object"==typeof u)for(var l in u){var h=u[l];if("style"===l)if("string"==typeof h)o.setAttribute(l,h);else for(var c in h)o.style[c]=h[c];else l in o||"function"==typeof h?o[l]=h:o.setAttribute(l,h)}}return o}function a(t,e){for(var o=t.el||t,a=o.firstChild,s=0;s<e.length;s++){var r=e[s];if(r){var u=r.el||r;u!==a?n(t,r,a):a=a.nextSibling}}for(;a;){var d=a.nextSibling;i(t,a),a=d}}function s(t,e,n,i){return new r(t,e,n,i)}function r(t,e,n,i){this.__redom_list=!0,this.View=e,this.key=n,this.initData=i,this.views=[],this.el="string"==typeof t?o(t):t,n&&(this.lookup={})}function u(t,e){return new c(t,e)}function d(i,o){var a,s=arguments;if("string"==typeof i)a=(g[i]||(g[i]=t(i,f))).cloneNode(!1);else{if(!i||!i.nodeType)throw new Error("At least one argument required");a=i.cloneNode(!1)}for(var r=!0,u=1;u<arguments.length;u++){var d=s[u];if(d)if("function"==typeof d)d=d(a);else if("string"==typeof d||"number"==typeof d)r?(r=!1,a.textContent=d):a.appendChild(e(d));else if(d.nodeType||d.el&&d.el.nodeType)r=!1,n(a,d);else if("object"==typeof d)for(var l in d){var h=d[l];if("style"===l&&"string"!=typeof h)for(var p in h)a.style[p]=h[p];else"function"==typeof h?a[l]=h:a.setAttribute(l,h)}}return a}var l="#",h=".",p={};o.extend=function(e){var n=p[e]||(p[e]=t(e));return o.bind(this,n)},r.extend=function(t,e,n,i){return r.bind(r,t,e,n,i)},s.extend=r.extend,r.prototype.update=function(t){for(var e=this.View,n=this.key,i="function"==typeof n,o=this.initData,s=new Array(t.length),r=this.views,u=n&&{},d=n&&this.lookup,l=0;l<t.length;l++){var h=t[l],p=void 0;if(n){var c=i?n(h):h[n];p=s[l]=d[c]||new e(o,h,l,t),u[c]=p,p.__id=c}else p=s[l]=r[l]||new e(o,h,l,t);var f=p.el;f.__redom_list&&(f=f.el),f.__redom_view=p,p.update&&p.update(h,l,t)}a(this,s),n&&(this.lookup=u),this.views=s};var c=function(t,e){this.el="string"==typeof t?o(t):t,this.Views=e};c.prototype.update=function(t,e){if(t!==this.route){var n=this.Views,i=n[t];this.view=i&&new i,this.route=t,a(this.el,[this.view])}this.view&&this.view.update&&this.view.update(e)};var f="http://www.w3.org/2000/svg",g={};d.extend=function(e){var n=g[e]||(g[e]=t(e,f));return d.bind(this,n)};var v=function(t,e,n){var i=t.el||t;i.dispatchEvent(new CustomEvent("redom",{detail:{type:e,data:n},bubbles:!0}))},m=function(t,e){var n=t.el||t;n.addEventListener("redom",function(t){var n=t.detail,i=n.type,o=n.data,a=e[i];a&&a(o,t)})},b=function(){var t=this;this.el=o(".menu-item"),this.el.onclick=function(e){v(t,"section",t.data.id)}};b.prototype.update=function(t){var e=t.name,n=t._current;this.el.textContent=e,n?this.el.classList.add("current"):this.el.classList.remove("current"),this.data=t};var y=function(){this.el=o(".menu",this.sections=s(".menu-items",b,"id"))};y.prototype.update=function(t){var e=t.sections,n=t.section;this.sections.update(e.map(function(t){return Object.assign({},t,{_current:n===t.id})})),this.data=t};var w=function(){this.el=o(".home",o("h1","Home"),o("p","Welcome to RE:DOM state handling example."),o("p",o("a",{href:"#info"},"Check out info section for some more info.")),o("p",o("a",{target:"_blank",href:"https://github.com/pakastin/redom-state"},"See source on Github!")))},_=function(){var t=this;this.el=o(".info",o("h1","RE:DOM state handling"),o("p","I like to do RE:DOM state handling so that I dispatch custom HTML event upstream and update RE:DOM components downstream.",o("br"),"To learn more how it works, check out Github repo: ",o("a",{target:"_blank",href:"https://github.com/pakastin/redom-state"},"https://github.com/pakastin/redom-state")),o("p","Turn on the debug mode, navigate around and see what happens under the hood:"),this.toggleDebug=o("button"),o("br"),this.toggleLogo=o("button"),o("br"),o("br"),this.logo=o("img",{src:"https://redom.js.org/img/logo.svg"}),o("br"),o("br"),o("p",o("i","ps. try refresh the page and see what happens ;)"))),this.toggleDebug.onclick=function(e){v(t,"toggle-debug")},this.toggleLogo.onclick=function(e){v(t,"toggle-logo")}};_.prototype.update=function(t){var e=t.debug,n=t.logo;e?this.toggleDebug.textContent="Deactivate state debugging":this.toggleDebug.textContent="Activate state debugging",n?(this.toggleLogo.textContent="Hide logo",this.logo.style.display=""):(this.toggleLogo.textContent="Show logo",this.logo.style.display="none"),this.data=t};var x=function(){var t=this;this.el=o(".fiddle",o("h1","Try add some content"),this.form=o("form",this.type=o("select",o("option",{value:"h1"},"h1"),o("option",{value:"h2"},"h2"),o("option",{value:"p"},"p")),this.text=o("input",{autofocus:!0,placeholder:"text"}),o("button",{type:"submit"},"Add text"),o("br"),o("br"),this.editable=s(".editable",D,"id"))),this.form.onsubmit=function(e){e.preventDefault(),v(t,"add-text",{type:t.type.value,text:t.text.value}),t.text.value="",t.text.focus()}};x.prototype.update=function(t){var e=t.editable;this.editable.update(e),this.data=t};var D=function(t,e){var n=this;this.el=o(e.type,this.span=o("span"),this.remove=o("button","x")),this.remove.onclick=function(t){v(n,"remove-text",n.data.id)}};D.prototype.update=function(t){this.span.textContent=t.text,this.data=t};var k=function(){this.el=o(".content"),this.router=u(this.el,{"":w,info:_,fiddle:x})};k.prototype.update=function(t){var e=t.section;this.router.update(e,t)};var C=function(t){var e=this;this.el=o(".debug"),this.app=t,this.onDebug=function(t){var n=t.detail,i=n.data,o=n.type;i?e.log('{ "type": "'+o+'", data: "'+i+'" }'):e.log('{ "type": \''+o+'" }')},this.data={}};C.prototype.update=function(t){var e=t.debug;e?(this.el.style.display="",this.app.el.addEventListener("redom",this.onDebug)):(this.el.style.display="none",this.app.el.removeEventListener("redom",this.onDebug)),e!==!!this.data.debug&&(e?this.log('{ "type": "toggle-debug" }'):this.log('{ "type": "toggle-debug" }')),this.data=t},C.prototype.log=function(t){n(this.el,o("p",Date.now()+" <- "+t)),n(this.el,o("p",Date.now()+" -> "+JSON.stringify(this.app.data,null," "))),n(this.el,o("br")),this.el.scrollTop=this.el.scrollHeight};var E=function(t){this.el=o(".app",this.menu=new y,this.content=new k,this.debug=new C(this)),this.data=t};E.prototype.update=function(){this.menu.update(this.data),this.content.update(this.data),this.debug.update(this.data),window.localStorage&&window.localStorage.setItem("redom-state",JSON.stringify(this.data))},E.prototype.recoverData=function(){var t=window.localStorage&&window.localStorage.getItem("redom-state");t&&(this.data=JSON.parse(t),this.update())};var O=function(t,e){var n=function(){var e=location.hash.slice(1).split("/");v(t,"route",e)},i={},o=function(n){i[n]=function(i,o){var a=e[n](t.data,i,o);a&&(t.data=a,t.update())}};for(var a in e)o(a);m(t,i),window.addEventListener("hashchange",n),t.startRoute=n},S=Date.now(),T=function(){return{route:function(t,e){var n=e[0];return Object.assign({},t,{section:n})},section:function(t,e){var n=window.location.hash.slice(1).split("/");n[0]=e,window.location.hash=n.join("/")},"toggle-debug":function(t){var e=!t.debug;return Object.assign({},t,{debug:e})},"toggle-logo":function(t){var e=!t.logo;return Object.assign({},t,{logo:e})},"add-text":function(t,e){var n=e.type,i=e.text;return Object.assign({},t,{editable:t.editable.concat({id:S++,type:n,text:i})})},"remove-text":function(t,e){return Object.assign({},t,{editable:t.editable.filter(function(t){return t.id!==e})})}}},L={sections:[{id:"",name:"Home"},{id:"info",name:"Info"},{id:"fiddle",name:"Fiddle"}],editable:[]},j=new E(L);n(document.body,j),O(j,T(j)),j.recoverData(),j.startRoute()}();
//# sourceMappingURL=main.map.js